<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>uzxin的个人博客</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="uzxin的个人博客"><meta name="msapplication-TileImage" content="https://cdn.jsdelivr.net/gh/removeif/removeif-demo@latest/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="uzxin的个人博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="铭记过去，拥抱未来，心中有梦，眼里有光"><meta property="og:type" content="blog"><meta property="og:title" content="uzxin的个人博客"><meta property="og:url" content="http://www.uzxin.top/"><meta property="og:site_name" content="uzxin的个人博客"><meta property="og:description" content="铭记过去，拥抱未来，心中有梦，眼里有光"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://114.55.28.2/images/uzxin_logo.png"><meta property="article:author" content="uzxin"><meta property="article:tag" content="生活,编程,阅读,音乐,电影"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="http://114.55.28.2/images/uzxin_logo.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://www.uzxin.top"},"headline":"uzxin的个人博客","image":["http://www.uzxin.top/img/og_image.png"],"author":{"@type":"Person","name":"uzxin"},"description":"铭记过去，拥抱未来，心中有梦，眼里有光"}</script><link rel="icon" href="https://cdn.jsdelivr.net/gh/removeif/removeif-demo@latest/img/favicon.png"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="/js/globalUtils.js"></script><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><link rel="stylesheet" href="/live2d/waifu.css"><script type="text/javascript" async src="/live2d/autoload.js"></script><meta name="generator" content="Hexo 5.2.0"></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="http://114.55.28.2/images/uzxin_logo.png" alt="uzxin的个人博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a><a class="navbar-item" href="/album">相册</a><a class="navbar-item" href="/friend">友链</a><a class="navbar-item" href="/message">留言</a><a class="navbar-item" href="/self-talking">碎碎念</a><a class="navbar-item" href="/music">音乐</a><a class="navbar-item" href="/media">影音</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Join Gitter" href="https://gitter.im/hexo-theme-amazing/community"><i class="fab fa-gitter"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/removeif/hexo-theme-amazing"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card widget">
            <div class="card-content">
                <h3 class="menu-label">热门推荐</h3><span id="index_hot_div">加载中，请稍等...</span>
            </div>
        </div><!--!--><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2021-01-06  <a class="commentCountImg" href="/2021/01/06/springboot%E6%95%B4%E5%90%88elaticsearch/#comment-container"><span class="display-none-class">5e5dba5a5112fdaafa13be692773ed61</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="5e5dba5a5112fdaafa13be692773ed61">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>14 分钟  <i class="fas fa-pencil-alt"> </i>2.1 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/06/springboot%E6%95%B4%E5%90%88elaticsearch/">springboot整合elaticsearch</a></h1><div class="content"><h2 id="1-创建demo工程"><a href="#1-创建demo工程" class="headerlink" title="1.创建demo工程"></a>1.创建demo工程</h2><p>springboot版本2.1.6    elasticsearch版本5.6.16</p>
<h4 id="1-pom-xml"><a href="#1-pom-xml" class="headerlink" title="(1)pom.xml"></a>(1)pom.xml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-application-yml"><a href="#2-application-yml" class="headerlink" title="(2)application.yml"></a>(2)application.yml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  elasticsearch:</span><br><span class="line">    rest:</span><br><span class="line">      uris: http:&#x2F;&#x2F;localhost:9200</span><br></pre></td></tr></table></figure>

<p>上面不行的话，springboot版本比较低的可以这样配</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  data:</span><br><span class="line">    elasticsearch:</span><br><span class="line">      cluster-nodes: localhost:9200 # es的连接地址及端口号</span><br><span class="line">      cluster-name: my-application # es集群的名称</span><br></pre></td></tr></table></figure>

<p>亲测了一下，<strong>localhost前面不能加http</strong>，加了会报错</p>
<h2 id="2-实体类"><a href="#2-实体类" class="headerlink" title="2.实体类"></a>2.实体类</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.example.elasticsearch.domain;</span><br><span class="line"></span><br><span class="line">import lombok.Data;</span><br><span class="line">import org.springframework.data.annotation.Id;</span><br><span class="line">import org.springframework.data.elasticsearch.annotations.Document;</span><br><span class="line">import org.springframework.data.elasticsearch.annotations.Field;</span><br><span class="line">import org.springframework.data.elasticsearch.annotations.FieldType;</span><br><span class="line"></span><br><span class="line">@Document(indexName &#x3D; &quot;user&quot;)</span><br><span class="line">@Data</span><br><span class="line">public class User &#123;</span><br><span class="line"></span><br><span class="line">    @Id</span><br><span class="line">    private String id;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    private Integer age;</span><br><span class="line"></span><br><span class="line">    private String school;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>@Document在旧的版本中还有type属性，后面的版本中已经移除了</p>
<p>@Document和@Id注解是必须要写的</p>
<h2 id="3-数据操作接口Repository类"><a href="#3-数据操作接口Repository类" class="headerlink" title="3.数据操作接口Repository类"></a>3.数据操作接口Repository类</h2><p>这个类主要用于对es数据进行增删改查</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">package com.example.elasticsearch.repository;</span><br><span class="line"></span><br><span class="line">import com.example.elasticsearch.domain.User;</span><br><span class="line">import org.springframework.data.elasticsearch.repository.ElasticsearchRepository;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">public interface UserRepository extends ElasticsearchRepository&lt;User, String&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-新建索引"><a href="#4-新建索引" class="headerlink" title="4.新建索引"></a>4.新建索引</h2><p><strong>有可能你的版本没有ElasticsearchTemplate这个东西，无所谓，插入数据的时候会自动创建索引，可以省略这一步</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package com.example.elasticsearch;</span><br><span class="line"></span><br><span class="line">import com.example.elasticsearch.domain.User;</span><br><span class="line">import com.example.elasticsearch.repository.UserRepository;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line">import org.springframework.data.elasticsearch.core.ElasticsearchTemplate;</span><br><span class="line">import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line">@SpringBootTest</span><br><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">public class TestUser &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private ElasticsearchTemplate elasticsearchTemplate;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 创建索引</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Test</span><br><span class="line">    public void createIndex()&#123;</span><br><span class="line">        &#x2F;&#x2F; 创建索引，会根据Item类的@Document注解信息来创建</span><br><span class="line">        elasticsearchTemplate.createIndex(User.class);</span><br><span class="line">		&#x2F;&#x2F; 配置映射，会根据Item类中的id、Field等字段来自动完成映射</span><br><span class="line">        elasticsearchTemplate.putMapping(User.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>现在的版本中，<strong>ElasticsearchTemplate已经被移除了</strong>，取而代之的是<strong>ElasticsearchRestTemplate</strong></p>
<p>而ElasticsearchRestTemplate的<strong>createIndex和putMapping</strong>方法也已经被移除了，这里我试了一下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">elasticsearchRestTemplate.createIndex(User.class);</span><br><span class="line"></span><br><span class="line">elasticsearchRestTemplate.putMapping(User.class);</span><br></pre></td></tr></table></figure>

<p>虽然能成功创建索引，但是在<strong>建立映射的时候失败了</strong></p>
<p>现在应该这么写了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">    * 创建索引</span><br><span class="line">    *&#x2F;</span><br><span class="line">   @Test</span><br><span class="line">   public void createIndex()&#123;</span><br><span class="line">   	&#x2F;&#x2F;第一种写法</span><br><span class="line">       elasticsearchRestTemplate.indexOps(IndexCoordinates.of(&quot;user&quot;)).create();</span><br><span class="line">       &#x2F;&#x2F;第二种写法</span><br><span class="line">       elasticsearchRestTemplate.indexOps(User.class).create();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-插入数据"><a href="#5-插入数据" class="headerlink" title="5.插入数据"></a>5.插入数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">    * 插入数据</span><br><span class="line">    *&#x2F;</span><br><span class="line">   @Test</span><br><span class="line">   public void save()&#123;</span><br><span class="line">       User user1 &#x3D; new User(&quot;1&quot;,&quot;孙悟空&quot;,500,&quot;花果山&quot;);</span><br><span class="line">       User user2 &#x3D; new User(&quot;2&quot;,&quot;猪八戒&quot;,800,&quot;高老庄&quot;);</span><br><span class="line">       User user3 &#x3D; new User(&quot;3&quot;,&quot;沙悟净&quot;,1000,&quot;流沙河&quot;);</span><br><span class="line">       ArrayList&lt;User&gt; users &#x3D; new ArrayList&lt;User&gt;() &#123;</span><br><span class="line">           &#123;</span><br><span class="line">               add(user1);</span><br><span class="line">               add(user2);</span><br><span class="line">               add(user3);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br><span class="line">       userRepository.saveAll(users);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>这里es会自动帮我们建立user的索引</p>
<h2 id="6-查询全部"><a href="#6-查询全部" class="headerlink" title="6.查询全部"></a>6.查询全部</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">  查询全部</span><br><span class="line">   *&#x2F;</span><br><span class="line">   @Test</span><br><span class="line">   public void findAll() &#123;</span><br><span class="line">       Iterable&lt;User&gt; item &#x3D; userRepository.findAll();</span><br><span class="line">       Iterator&lt;User&gt; it &#x3D; item.iterator();</span><br><span class="line">       while (it.hasNext())&#123;</span><br><span class="line">           System.out.println(it.next());</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>控制台输出，查询成功</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">User(id&#x3D;2, name&#x3D;猪八戒, age&#x3D;800, school&#x3D;高老庄)</span><br><span class="line">User(id&#x3D;1, name&#x3D;孙悟空, age&#x3D;500, school&#x3D;花果山)</span><br><span class="line">User(id&#x3D;3, name&#x3D;沙悟净, age&#x3D;1000, school&#x3D;流沙河)</span><br></pre></td></tr></table></figure>

<h2 id="7-分页查询"><a href="#7-分页查询" class="headerlink" title="7.分页查询"></a>7.分页查询</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">   分页查询</span><br><span class="line">    *&#x2F;</span><br><span class="line">   @Test</span><br><span class="line">   public void page() &#123;</span><br><span class="line">	Page&lt;User&gt; page &#x3D; userRepository.findAll(PageRequest.of(0, 2));</span><br><span class="line">	for(User item:page)&#123;</span><br><span class="line">		System.out.println(item);</span><br><span class="line">	&#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>控制台输出第一页的数据，查询成功，一共只有3条数据，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User(id&#x3D;2, name&#x3D;猪八戒, age&#x3D;800, school&#x3D;高老庄)</span><br><span class="line">User(id&#x3D;1, name&#x3D;孙悟空, age&#x3D;500, school&#x3D;花果山)</span><br></pre></td></tr></table></figure>

<h2 id="8-排序"><a href="#8-排序" class="headerlink" title="8.排序"></a>8.排序</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">    * 排序</span><br><span class="line">    *&#x2F;</span><br><span class="line">   @Test</span><br><span class="line">   public void sort() &#123;</span><br><span class="line">       &#x2F;&#x2F; descending 降序</span><br><span class="line">	Iterable&lt;User&gt; iterable &#x3D; userRepository.findAll(Sort.by(&quot;age&quot;).descending());</span><br><span class="line">	Iterator&lt;User&gt; it &#x3D; iterable.iterator();</span><br><span class="line">	while(it.hasNext())&#123;</span><br><span class="line">		System.out.println(it.next());</span><br><span class="line">	&#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>按年龄进行降序排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">User(id&#x3D;3, name&#x3D;沙悟净, age&#x3D;1000, school&#x3D;流沙河)</span><br><span class="line">User(id&#x3D;2, name&#x3D;猪八戒, age&#x3D;800, school&#x3D;高老庄)</span><br><span class="line">User(id&#x3D;1, name&#x3D;孙悟空, age&#x3D;500, school&#x3D;花果山)</span><br></pre></td></tr></table></figure>

<h2 id="9-math查询（分词匹配查询）"><a href="#9-math查询（分词匹配查询）" class="headerlink" title="9.math查询（分词匹配查询）"></a>9.math查询（分词匹配查询）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">   * 分词匹配查询</span><br><span class="line">   *&#x2F;</span><br><span class="line">  @Test</span><br><span class="line">  public void search() &#123;</span><br><span class="line">&#x2F;&#x2F; 构建查询条件</span><br><span class="line">NativeSearchQueryBuilder queryBuilder &#x3D; new NativeSearchQueryBuilder();</span><br><span class="line">&#x2F;&#x2F; 添加基本分词查询</span><br><span class="line">queryBuilder.withQuery(QueryBuilders.matchQuery(&quot;name&quot;, &quot;悟净&quot;));</span><br><span class="line">&#x2F;&#x2F; 搜索，获取结果</span><br><span class="line">Page&lt;User&gt; items &#x3D; userRepository.search(queryBuilder.build());</span><br><span class="line">&#x2F;&#x2F; 总条数</span><br><span class="line">long total &#x3D; items.getTotalElements();</span><br><span class="line">System.out.println(&quot;total &#x3D; &quot; + total);</span><br><span class="line">for (User item : items) &#123;</span><br><span class="line">	System.out.println(item);</span><br><span class="line">&#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>这里会把“悟净”拆分成“悟”和“净”去匹配</p>
<p>查询结果一共有2条</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">total &#x3D; 2</span><br><span class="line">User(id&#x3D;1, name&#x3D;孙悟空, age&#x3D;500, school&#x3D;花果山)</span><br><span class="line">User(id&#x3D;3, name&#x3D;沙悟净, age&#x3D;1000, school&#x3D;流沙河)</span><br></pre></td></tr></table></figure>

<h2 id="10-term查询（精准查询）"><a href="#10-term查询（精准查询）" class="headerlink" title="10.term查询（精准查询）"></a>10.term查询（精准查询）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">    * 模糊查询</span><br><span class="line">    *&#x2F;</span><br><span class="line">   @Test</span><br><span class="line">   public void testTermQuery() &#123;</span><br><span class="line">	&#x2F;&#x2F; 查询条件生成器</span><br><span class="line">	NativeSearchQueryBuilder builder &#x3D; new NativeSearchQueryBuilder();</span><br><span class="line">	builder.withQuery(QueryBuilders.termQuery(&quot;name&quot;,&quot;悟净&quot;));</span><br><span class="line">	&#x2F;&#x2F; 查询 自动分页 ,默认查找第一页的10条数据</span><br><span class="line">	Page&lt;User&gt; list &#x3D; userRepository.search(builder.build());</span><br><span class="line">       &#x2F;&#x2F; 总条数</span><br><span class="line">       long total &#x3D; list.getTotalElements();</span><br><span class="line">       System.out.println(&quot;total &#x3D; &quot; + total);</span><br><span class="line">	for(User item:list)&#123;</span><br><span class="line">		System.out.println(item);</span><br><span class="line">	&#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>查询结果为0</p>
<p>修改代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">builder.withQuery(QueryBuilders.termQuery(&quot;name&quot;,&quot;孙悟空&quot;));</span><br></pre></td></tr></table></figure>

<p><strong>查询结果还是为0</strong>，这是怎么回事呢？我明明有这行数据呀</p>
<p>修改代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">builder.withQuery(QueryBuilders.termQuery(&quot;name.keyword&quot;,&quot;孙悟空&quot;));</span><br></pre></td></tr></table></figure>

<p>查询结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">total &#x3D; 1</span><br><span class="line">User(id&#x3D;1, name&#x3D;孙悟空, age&#x3D;500, school&#x3D;花果山)</span><br></pre></td></tr></table></figure>

<p><strong>原因：</strong>term做精确查询可以用它来处理数字，布尔值，日期以及文本。查询数字时问题不大，但是当查询字符串时会有问题。term查询的含义是termQuery会去倒排索引中寻找确切的term,但是它并不知道分词器的存在。term表示查询字段里含有某个关键词的文档，terms表示查询字段里含有多个关键词的文档。也就是说直接对字段进行term本质上还是模糊查询，只不过不会对搜索的输入字符串进行分词处理罢了。如果想通过term查到数据，那么term查询的字段在索引库中就必须有与term查询条件相同的索引词，否则无法查询到结果。</p>
<p>一句话解释：elasticsearch  里默认的IK分词器是会将每一个中文都进行了分词的切割，所以你直接想查一整个词，或者一整句话是无返回结果的。</p>
<p>**关于keyword:**我看有的文章说设置该属性用于关键词搜索，不进行分词。对于字符串类型的字段，es会默认生成一个keyword字段用于精确搜索。也有的说实际上还是会分词，只不过keyword的设置增加了一个额外字段，该字段就是filename.keyword。这个keyword才是不分词的索引字段，也就真正意义上实现了不分词处理字段。索引也是索引该字段才生成真正的精确匹配。至于分不分词实验一下就好了。感觉他们想表达的意思差不多是filename.keyword不分词，但是filename还是会分词。</p>
<p><strong>总结：match query搜索的时候，首先会解析查询字符串，进行分词，然后查询，而term query,输入的查询内容是什么，就会按照什么去查询，并不会解析查询内容，对它分词。</strong></p>
<h2 id="11-fuzzy查询（模糊查询）"><a href="#11-fuzzy查询（模糊查询）" class="headerlink" title="11.fuzzy查询（模糊查询）"></a>11.fuzzy查询（模糊查询）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">    * 模糊查询</span><br><span class="line">    *&#x2F;</span><br><span class="line">   @Test</span><br><span class="line">   public void testFuzzyQuery() &#123;</span><br><span class="line">	NativeSearchQueryBuilder builder &#x3D; new NativeSearchQueryBuilder();</span><br><span class="line">	builder.withQuery(QueryBuilders.fuzzyQuery(&quot;name&quot;,&quot;悟&quot;));</span><br><span class="line">	Page&lt;User&gt; list &#x3D; userRepository.search(builder.build());</span><br><span class="line">	for(User item:list)&#123;</span><br><span class="line">		System.out.println(item);</span><br><span class="line">	&#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>查询结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User(id&#x3D;1, name&#x3D;孙悟空, age&#x3D;500, school&#x3D;花果山)</span><br><span class="line">User(id&#x3D;3, name&#x3D;沙悟净, age&#x3D;1000, school&#x3D;流沙河)</span><br></pre></td></tr></table></figure>

<h2 id="12-Wildcard查询（通配符查询）"><a href="#12-Wildcard查询（通配符查询）" class="headerlink" title="12.Wildcard查询（通配符查询）"></a>12.Wildcard查询（通配符查询）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">    * 通配符查询</span><br><span class="line">    *&#x2F;</span><br><span class="line">   @Test</span><br><span class="line">   public void testWildcardQuery()&#123;</span><br><span class="line">       NativeSearchQueryBuilder builder &#x3D; new NativeSearchQueryBuilder();</span><br><span class="line">       builder.withQuery(QueryBuilders.wildcardQuery(&quot;name&quot;, &quot;*空&quot;));</span><br><span class="line">       Page&lt;User&gt; users &#x3D; userRepository.search(builder.build());</span><br><span class="line">       for(User item:users)&#123;</span><br><span class="line">           System.out.println(item);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>查询结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User(id&#x3D;1, name&#x3D;孙悟空, age&#x3D;500, school&#x3D;花果山)</span><br></pre></td></tr></table></figure>

<p><strong>特别要注意</strong>，WildcardQuery查询是很慢的，因为它需要遍历很多的Term,为了避免极慢的查询速度，请不要使用以星号开头的通配符进行查询。</p>
<h2 id="13-bool查询（布尔查询）"><a href="#13-bool查询（布尔查询）" class="headerlink" title="13.bool查询（布尔查询）"></a>13.bool查询（布尔查询）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">   布尔查询、组合查询</span><br><span class="line">    *&#x2F;</span><br><span class="line">   @Test</span><br><span class="line">   public void testBooleanQuery() &#123;</span><br><span class="line">	NativeSearchQueryBuilder builder &#x3D; new NativeSearchQueryBuilder();</span><br><span class="line">	builder.withQuery(QueryBuilders.boolQuery().must(QueryBuilders.matchQuery(&quot;name&quot;,&quot;悟净&quot;))</span><br><span class="line">			.filter(QueryBuilders.matchQuery(&quot;age&quot;,&quot;500&quot;))</span><br><span class="line">			.should(QueryBuilders.matchQuery(&quot;school&quot;,&quot;高老庄&quot;))</span><br><span class="line">	);</span><br><span class="line">	Page&lt;User&gt; list &#x3D; userRepository.search(builder.build());</span><br><span class="line">	for(User item:list)&#123;</span><br><span class="line">		System.out.println(item);</span><br><span class="line">	&#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>查询结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User(id&#x3D;1, name&#x3D;孙悟空, age&#x3D;500, school&#x3D;花果山)</span><br></pre></td></tr></table></figure>

<p><strong>must</strong>：返回的文档必须满足must子句的条件，并且参与计算分值</p>
<p><strong>filter</strong>：返回的文档必须满足filter子句的条件。但是不会像Must一样，参与计算分值</p>
<p><strong>should</strong>：返回的文档可能满足should子句的条件。在一个Bool查询中，如果没有must或者filter，有一个或者多个should子句，那么只要满足一个就可以返回</p>
<p><strong>must_nout</strong>:返回的文档必须不满足must_not定义的条件</p>
<h2 id="14-范围查询"><a href="#14-范围查询" class="headerlink" title="14.范围查询"></a>14.范围查询</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">    * 范围查询</span><br><span class="line">    *&#x2F;</span><br><span class="line">@Test</span><br><span class="line">public void testRangeQuery()&#123;</span><br><span class="line">	NativeSearchQueryBuilder queryBuilder &#x3D; new NativeSearchQueryBuilder();</span><br><span class="line">	queryBuilder.withQuery(QueryBuilders.rangeQuery(&quot;age&quot;).from(800).to(2000));</span><br><span class="line">	Page&lt;User&gt; page &#x3D; userRepository.search(queryBuilder.build());</span><br><span class="line">	for(User i:page)&#123;</span><br><span class="line">		System.out.println(i);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>查询年龄在800-2000的，查询结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User(id&#x3D;2, name&#x3D;猪八戒, age&#x3D;800, school&#x3D;高老庄)</span><br><span class="line">User(id&#x3D;3, name&#x3D;沙悟净, age&#x3D;1000, school&#x3D;流沙河)</span><br></pre></td></tr></table></figure>

</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/springboot/">springboot</a><span> </span><a class="article-more button is-small link-muted index-tags" href="/tags/elaticsearch/">elaticsearch</a></div><hr></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2021-01-06  <a class="commentCountImg" href="/2021/01/06/windows%E5%AE%89%E8%A3%85elasticsearch/#comment-container"><span class="display-none-class">3faa126f1f4c6ce2804581aa07362754</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="3faa126f1f4c6ce2804581aa07362754">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>1 分钟  <i class="fas fa-pencil-alt"> </i>0.2 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/06/windows%E5%AE%89%E8%A3%85elasticsearch/">windows安装elasticsearch</a></h1><div class="content"><h2 id="1-下载压缩包"><a href="#1-下载压缩包" class="headerlink" title="1.下载压缩包"></a>1.下载压缩包</h2><p><a target="_blank" rel="noopener" href="https://elasticsearch.cn/download/">下载链接</a></p>
<p>选择要下载的版本</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20210106145217548.png" alt="image-20210106145217548"></p>
<h2 id="2-解压"><a href="#2-解压" class="headerlink" title="2.解压"></a>2.解压</h2><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20210106145253302.png" alt="image-20210106145253302"></p>
<h2 id="3-修改配置"><a href="#3-修改配置" class="headerlink" title="3.修改配置"></a>3.修改配置</h2><p>用文本编辑器打开config目录下的elasticsearch.yml</p>
<p>新增以下配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cluster.name: my-application</span><br><span class="line"></span><br><span class="line">node.name: node-1</span><br><span class="line"></span><br><span class="line">network.host: 0.0.0.0</span><br><span class="line"></span><br><span class="line">http.port: 9200</span><br><span class="line"></span><br><span class="line">http.cors.enabled: true </span><br><span class="line">http.cors.allow-origin: &quot;*&quot;</span><br><span class="line">node.master: true</span><br><span class="line">node.data: true</span><br></pre></td></tr></table></figure>

<h2 id="4-启动"><a href="#4-启动" class="headerlink" title="4.启动"></a>4.启动</h2><p>双击bin目录下的elasticsearch.bat文件</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20210106145603240.png" alt="image-20210106145603240"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20210106145733197.png" alt="image-20210106145733197"></p>
<h2 id="5-启动成功，浏览器访问http-localhost-9200"><a href="#5-启动成功，浏览器访问http-localhost-9200" class="headerlink" title="5.启动成功，浏览器访问http://localhost:9200/"></a>5.启动成功，浏览器访问<a target="_blank" rel="noopener" href="http://localhost:9200/">http://localhost:9200/</a></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 20210106145753</span><br><span class="line">&#x2F;&#x2F; http:&#x2F;&#x2F;localhost:9200&#x2F;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;node-1&quot;,</span><br><span class="line">  &quot;cluster_name&quot;: &quot;my-application&quot;,</span><br><span class="line">  &quot;cluster_uuid&quot;: &quot;1VIYGf2tT2i80lp02cEerA&quot;,</span><br><span class="line">  &quot;version&quot;: &#123;</span><br><span class="line">    &quot;number&quot;: &quot;5.6.16&quot;,</span><br><span class="line">    &quot;build_hash&quot;: &quot;3a740d1&quot;,</span><br><span class="line">    &quot;build_date&quot;: &quot;2019-03-13T15:33:36.565Z&quot;,</span><br><span class="line">    &quot;build_snapshot&quot;: false,</span><br><span class="line">    &quot;lucene_version&quot;: &quot;6.6.1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;tagline&quot;: &quot;You Know, for Search&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/windows/">windows</a><span> </span><a class="article-more button is-small link-muted index-tags" href="/tags/springboot/">springboot</a></div><hr></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2021-01-06  <a class="commentCountImg" href="/2021/01/06/mysql5-7%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81/#comment-container"><span class="display-none-class">52fa1aa33e6de8483f15e700cc050d6a</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="52fa1aa33e6de8483f15e700cc050d6a">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>几秒  <i class="fas fa-pencil-alt"> </i>0.0 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/06/mysql5-7%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81/">mysql5.7修改用户密码</a></h1><div class="content"><h2 id="将下面代码复制到navicat执行命令窗口或者直接用mysql命令执行"><a href="#将下面代码复制到navicat执行命令窗口或者直接用mysql命令执行" class="headerlink" title="将下面代码复制到navicat执行命令窗口或者直接用mysql命令执行"></a>将下面代码复制到navicat执行命令窗口或者直接用mysql命令执行</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line"></span><br><span class="line">update mysql.user set authentication_string&#x3D;password(&#39;密码&#39;) where user&#x3D;&#39;用户名&#39;;</span><br><span class="line"></span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/MySQL/">MySQL</a></div><hr></div></article></div><!--!--><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2021-01-06  <a class="commentCountImg" href="/2021/01/06/elasticsearch%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/#comment-container"><span class="display-none-class">7f1ed73edae93ee35b43b5f7305cc004</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="7f1ed73edae93ee35b43b5f7305cc004">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>6 分钟  <i class="fas fa-pencil-alt"> </i>0.9 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/06/elasticsearch%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/">elasticsearch基本概念</a></h1><div class="content"><h2 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h2><p>​        elasticsearch（以下简称es）是一个基于Lucene的搜索引擎. 它提供了一个分布式多用户能力的全文搜索引擎，基于RESTful  web接口。elasticsearch是用Java开发的，并作为Apache许可条款下的开放源码发布，是当前流行的企业级搜索引擎。设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。</p>
<ul>
<li><strong>索引</strong>：含有相同属性的文档集合(可以用一个索引来代表消费者数据，另一个索引代表产品数据，通过名字来识别，英文字母小写，且不含中划线)</li>
<li><strong>类型</strong>：索引可以定义一个或多个类型，文档必须属于一个类型(通常定义有相同字段的文档作为一个类型)</li>
<li><strong>文档</strong>：文档是可以被索引的基本数据单位(一个用户的基本信息，一篇文章的数据等，是整个es最小的存储单位)</li>
<li><strong>分片</strong>：每个索引都有多个分片，每个分片都是一个Lucene索引(类似数据库分库，化整为零，分散压力、提高效率)</li>
<li><strong>备份</strong>：拷贝一份分片就完成了分片的备份，提高可用性、备份的分片可以执行搜索操作，分摊搜索压力，默认五个分片(创建索引时指定，后期无法修改)、一个备份(可以动态修改)<br> 简单来说，索引可以类比“数据库(database)”，类型可以类比“表(table)”，文档可以类比”记录(record)”。</li>
</ul>
<h2 id="2-安装"><a href="#2-安装" class="headerlink" title="2.安装"></a>2.安装</h2><p>参考<a href="http://www.uzxin.top/2021/01/06/windows%E5%AE%89%E8%A3%85elasticsearch">windows安装elasticsearch</a><a href="http://www.uzxin.top/2021/01/06/centos%E5%AE%89%E8%A3%85elasticsearch">centos安装elasticsearch</a></p>
<h2 id="3-基本接口"><a href="#3-基本接口" class="headerlink" title="3.基本接口"></a>3.基本接口</h2><h4 id="（1）新建索引，PUT请求"><a href="#（1）新建索引，PUT请求" class="headerlink" title="（1）新建索引，PUT请求"></a>（1）新建索引，PUT请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;people</span><br></pre></td></tr></table></figure>

<p>people是<strong>索引名字</strong></p>
<p>参数放在requestBody中，用json格式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;settings&quot;:&#123;</span><br><span class="line">		&quot;number_of_shards&quot;:5,	#分片数</span><br><span class="line">		&quot;number_of_replicas&quot;:1	#副本数</span><br><span class="line">	&#125;,</span><br><span class="line">	&quot;mappings&quot;:&#123;</span><br><span class="line">		&quot;man&quot;:&#123;	#类型</span><br><span class="line">			&quot;properties&quot;:&#123;</span><br><span class="line">				&quot;name&quot;:&#123;	#字段名</span><br><span class="line">					&quot;type&quot;:&quot;text&quot;	#字段类型</span><br><span class="line">				&#125;,</span><br><span class="line">				&quot;country&quot;:&#123;</span><br><span class="line">					&quot;type&quot;:&quot;keyword&quot;</span><br><span class="line">				&#125;,</span><br><span class="line">				&quot;age&quot;:&#123;</span><br><span class="line">					&quot;type&quot;:&quot;integer&quot;</span><br><span class="line">				&#125;,</span><br><span class="line">				&quot;date&quot;:&#123;</span><br><span class="line">					&quot;type&quot;:&quot;date&quot;,</span><br><span class="line">					&quot;format&quot;:&quot;yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis&quot;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		&quot;woman&quot;:&#123;	#类型</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="（2）删除索引，DELETE请求"><a href="#（2）删除索引，DELETE请求" class="headerlink" title="（2）删除索引，DELETE请求"></a>（2）删除索引，DELETE请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;people</span><br></pre></td></tr></table></figure>

<h4 id="（3）插入数据，POST请求"><a href="#（3）插入数据，POST请求" class="headerlink" title="（3）插入数据，POST请求"></a>（3）插入数据，POST请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;people&#x2F;man	或者	http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;people&#x2F;man&#x2F;1</span><br><span class="line">#前者会帮你自动生成id，后者是指定id</span><br></pre></td></tr></table></figure>

<p>参数放在requestBody中，用json格式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;:&quot;uzxin&quot;,</span><br><span class="line">    &quot;country&quot;:&quot;china&quot;,</span><br><span class="line">    &quot;age&quot;:&quot;23&quot;,</span><br><span class="line">    &quot;date&quot;:&quot;1998-05-05&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="（4）修改数据，POST请求"><a href="#（4）修改数据，POST请求" class="headerlink" title="（4）修改数据，POST请求"></a>（4）修改数据，POST请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;people&#x2F;man&#x2F;1</span><br></pre></td></tr></table></figure>

<p>1是<strong>数据id</strong></p>
<p>参数放在requestBody中，用json格式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;doc&quot;:&#123;</span><br><span class="line">        &quot;name&quot;:&quot;apache&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="（5）删除数据，DELETE请求"><a href="#（5）删除数据，DELETE请求" class="headerlink" title="（5）删除数据，DELETE请求"></a>（5）删除数据，DELETE请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;people&#x2F;man&#x2F;1</span><br></pre></td></tr></table></figure>

<p>1是<strong>数据id</strong></p>
<h2 id="4-查询接口"><a href="#4-查询接口" class="headerlink" title="4.查询接口"></a>4.查询接口</h2><h4 id="（1）简单查询，GET请求"><a href="#（1）简单查询，GET请求" class="headerlink" title="（1）简单查询，GET请求"></a>（1）简单查询，GET请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;book&#x2F;novel&#x2F;1</span><br></pre></td></tr></table></figure>

<p>book是索引，novel是类型，1是数据id</p>
<h4 id="（2）条件查询，GET请求"><a href="#（2）条件查询，GET请求" class="headerlink" title="（2）条件查询，GET请求"></a>（2）条件查询，GET请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;book&#x2F;_search</span><br></pre></td></tr></table></figure>

<p>参数放在requestBody中，用json格式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;from&quot;:0,	#可选参数，默认为0</span><br><span class="line">    &quot;size&quot;:5,	#可选参数，默认为10</span><br><span class="line">	&quot;query&quot;:&#123;	#条件查询</span><br><span class="line">		&quot;match&quot;:&#123;</span><br><span class="line">			&quot;title&quot;:&quot;猪&quot;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	&quot;sort&quot;:[	#排序</span><br><span class="line">		&#123;</span><br><span class="line">			&quot;public_date&quot;:&#123;</span><br><span class="line">				&quot;order&quot;:&quot;desc&quot;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="（3）聚合查询，POST请求"><a href="#（3）聚合查询，POST请求" class="headerlink" title="（3）聚合查询，POST请求"></a>（3）聚合查询，POST请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;book&#x2F;_search</span><br></pre></td></tr></table></figure>

<p>参数放在requestBody中，用json格式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;aggs&quot;:&#123;  #聚合关键字</span><br><span class="line">		&quot;group_by_word_count&quot;:&#123; #名称，自定义</span><br><span class="line">			&quot;terms&quot;:&#123;</span><br><span class="line">				&quot;field&quot;:&quot;word_count&quot; #要统计的列</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		&quot;group_by_public_date&quot;:&#123; #名称，自定义</span><br><span class="line">			&quot;terms&quot;:&#123;</span><br><span class="line">				&quot;field&quot;:&quot;public_date&quot; #要统计的列</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-与mysql同步"><a href="#5-与mysql同步" class="headerlink" title="5.与mysql同步"></a>5.与mysql同步</h2><p>目前mysql与elasticsearch常用的同步机制大多是基于插件实现的，常用的插件包括：elasticsearch-jdbc、elasticsearch-river-MySQL 、go-mysql-elasticsearch、 logstash-input-jdbc<br> 其中最简单易用、性能稳定的插件为logstash-input-jdbc</p>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/elaticsearch/">elaticsearch</a></div><hr></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2021-01-04  <a class="commentCountImg" href="/2021/01/04/centos%E5%AE%89%E8%A3%85svn/#comment-container"><span class="display-none-class">cda7b143def34ab71b1586a89d7e3877</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="cda7b143def34ab71b1586a89d7e3877">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>9 分钟  <i class="fas fa-pencil-alt"> </i>1.4 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/04/centos%E5%AE%89%E8%A3%85svn/">centos安装svn</a></h1><div class="content"><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">检查是否安装SVN：rpm -qa subversion</span><br><span class="line">查看安装SVN版本信息：svnserve --version</span><br><span class="line">卸载旧版本SVN： yum remove subversion</span><br></pre></td></tr></table></figure>

<h2 id="1-yum命令安装svn"><a href="#1-yum命令安装svn" class="headerlink" title="1.yum命令安装svn"></a>1.yum命令安装svn</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install subversion</span><br></pre></td></tr></table></figure>

<p><img src="http://114.55.28.2/images/hexo/2021/1/4/1.png" alt="image-20210104161808901"></p>
<p>查看一下svn版本信息，确保已经安装成功</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svnserve --version</span><br></pre></td></tr></table></figure>

<p><img src="http://114.55.28.2/images/hexo/2021/1/4/2.png" alt="image-20210104161951343"></p>
<h2 id="2-创建目录作为项目仓库"><a href="#2-创建目录作为项目仓库" class="headerlink" title="2.创建目录作为项目仓库"></a>2.创建目录作为项目仓库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;usr&#x2F;local&#x2F;svn</span><br></pre></td></tr></table></figure>

<h2 id="3-创建版本库"><a href="#3-创建版本库" class="headerlink" title="3.创建版本库"></a>3.创建版本库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svnadmin create &#x2F;usr&#x2F;local&#x2F;svn&#x2F;demo</span><br></pre></td></tr></table></figure>

<p><img src="http://114.55.28.2/images/hexo/2021/1/4/3.png" alt="image-20210104162533277"></p>
<h2 id="4-配置代码库"><a href="#4-配置代码库" class="headerlink" title="4.配置代码库"></a>4.配置代码库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;svn&#x2F;demo&#x2F;conf</span><br></pre></td></tr></table></figure>

<p><img src="http://114.55.28.2/images/hexo/2021/1/4/4.png" alt="image-20210104162633717"></p>
<h4 id="（1）设置SVN用户及口令"><a href="#（1）设置SVN用户及口令" class="headerlink" title="（1）设置SVN用户及口令"></a>（1）设置SVN用户及口令</h4><p>修改文件passwd，设置哪些用户可以访问SVN资源库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim passwd</span><br></pre></td></tr></table></figure>

<p><img src="http://114.55.28.2/images/hexo/2021/1/4/5.png" alt="image-20210104162910953"></p>
<h4 id="（2）设置SVN用户访问权限"><a href="#（2）设置SVN用户访问权限" class="headerlink" title="（2）设置SVN用户访问权限"></a>（2）设置SVN用户访问权限</h4><p>修改authz文件，设置哪些用户有什么权限访问哪些目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim authz</span><br></pre></td></tr></table></figure>

<p><img src="http://114.55.28.2/images/hexo/2021/1/4/6.png" alt="image-20210104163359882"></p>
<h4 id="3-设置配置文件"><a href="#3-设置配置文件" class="headerlink" title="(3) 设置配置文件"></a>(3) 设置配置文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim svnserve.conf </span><br></pre></td></tr></table></figure>

<p><img src="http://114.55.28.2/images/hexo/2021/1/4/7.png" alt="image-20210104163716841"></p>
<h2 id="5-启动svn服务"><a href="#5-启动svn服务" class="headerlink" title="5.启动svn服务"></a>5.启动svn服务</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svnserve -d -r &#x2F;usr&#x2F;local&#x2F;svn  或者  &#x2F;etc&#x2F;init.d&#x2F;svnserve restart</span><br></pre></td></tr></table></figure>

<p>注意：<strong>这路径不能到ProjectName</strong>，否则在访问时候会报svn: E170000: URL ‘svn://虚拟机ip地址/ProjectName’ doesn’t exist</p>
<p>1）带 -d 选项即可以作为一个单独的守护进程运行，-r 选项可以指定发布哪个目录下的版本库；</p>
<p>2）一旦服务器运行，就在默认端口3690进行监听，使用 telnet 可以测试到 3690 端口已经开放了</p>
<p>3）若需更改SVN服务默认端口:</p>
<p>　　查看端口使用情况：netstat -antp</p>
<p>　　启动svn和指定端口的方法是：svnserve -d –list-port 3700 -r /usr/local/svn/demo</p>
<h2 id="6-查看SVN服务是否正常"><a href="#6-查看SVN服务是否正常" class="headerlink" title="6.查看SVN服务是否正常"></a>6.查看SVN服务是否正常</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep svn	或者	ps aux|grep svn	或者	netstat -tunlp | grep 3690</span><br></pre></td></tr></table></figure>

<p><img src="http://114.55.28.2/images/hexo/2021/1/4/8.png" alt="8"></p>
<h2 id="7-SVN客户端TortoiseSVN连接访问服务器"><a href="#7-SVN客户端TortoiseSVN连接访问服务器" class="headerlink" title="7.SVN客户端TortoiseSVN连接访问服务器"></a>7.SVN客户端TortoiseSVN连接访问服务器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn:&#x2F;&#x2F;ip&#x2F;项目名</span><br></pre></td></tr></table></figure>

<p><img src="http://114.55.28.2/images/hexo/2021/1/4/9.png" alt="image-20210104171910575"></p>
<h2 id="8-配置Apache的http协议访问"><a href="#8-配置Apache的http协议访问" class="headerlink" title="8.配置Apache的http协议访问"></a>8.<strong>配置Apache的http协议访问</strong></h2><h4 id="（1）查看httpd是否已经安装的svn模块"><a href="#（1）查看httpd是否已经安装的svn模块" class="headerlink" title="（1）查看httpd是否已经安装的svn模块"></a>（1）<strong>查看httpd是否已经安装的svn模块</strong></h4><p>ls /etc/httpd/modules/ | grep svn</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ls &#x2F;etc&#x2F;httpd&#x2F;modules&#x2F; | grep svn</span><br><span class="line">ls: cannot access &#x2F;etc&#x2F;httpd&#x2F;modules&#x2F;: No such file or directory</span><br></pre></td></tr></table></figure>

<p>如果没安装，使用yum安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mod_dav_svn -y</span><br></pre></td></tr></table></figure>

<p>查看mod_dav_svn是否安装成功</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls &#x2F;etc&#x2F;httpd&#x2F;modules&#x2F; | grep svn</span><br></pre></td></tr></table></figure>

<h4 id="（2）安装完成，对svn版本库下的项目ProjectName进行位置映射"><a href="#（2）安装完成，对svn版本库下的项目ProjectName进行位置映射" class="headerlink" title="（2）安装完成，对svn版本库下的项目ProjectName进行位置映射"></a>（2）安装完成，对svn版本库下的项目ProjectName进行位置映射</h4><p>在/etc/httpd/conf.d/文件下创建subversion.conf文件并编辑</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost conf.d]# ls</span><br><span class="line">autoindex.conf  README  subversion.conf  userdir.conf  welcome.conf</span><br><span class="line">[root@localhost conf.d]#</span><br><span class="line">[root@localhost conf.d]# pwd</span><br><span class="line">&#x2F;etc&#x2F;httpd&#x2F;conf.d</span><br><span class="line">[root@localhost conf.d]#</span><br><span class="line">[root@localhost conf.d]# cat subversion.conf</span><br><span class="line">LoadModule dav_svn_module     modules&#x2F;mod_dav_svn.so</span><br><span class="line">LoadModule authz_svn_module   modules&#x2F;mod_authz_svn.so</span><br><span class="line">&lt;Location &#x2F;svn&gt;</span><br><span class="line">   DAV svn</span><br><span class="line">   SVNParentPath &#x2F;home&#x2F;svn</span><br><span class="line"></span><br><span class="line">   &lt;LimitExcept GET PROPFIND OPTIONS REPORT&gt;</span><br><span class="line">      AuthType Basic</span><br><span class="line">      AuthName &quot;Authorization Realm&quot;</span><br><span class="line">      AuthUserFile &#x2F;home&#x2F;svn&#x2F;svnusers.conf</span><br><span class="line">      AuthzSVNAccessFile &#x2F;home&#x2F;svn&#x2F;accesspolicy.conf</span><br><span class="line">      Require valid-user</span><br><span class="line">   &lt;&#x2F;LimitExcept&gt;</span><br><span class="line">&lt;&#x2F;Location&gt;</span><br></pre></td></tr></table></figure>

<p>Location     #后面是访问路径</p>
<p>AuthType       #使用基本认证方式，即用户名、密码认证 </p>
<p>AuthName      # 在认证对话框中出现的提示信息 </p>
<p>AuthUserFile    # 指定存放用户名信息的文件路径</p>
<p>AuthzSVNAccessFile   # 指定存放用户访问路径信息的文件路径即设置权限</p>
<p>Require        # 限定只有用户输入正确的用户名和密码后才能访问该标签所指向的路径 </p>
<h4 id="（3）使用htpasswd创建http登陆的账户密码"><a href="#（3）使用htpasswd创建http登陆的账户密码" class="headerlink" title="（3）使用htpasswd创建http登陆的账户密码"></a>（3）使用htpasswd创建http登陆的账户密码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">htpasswd -c -m &#x2F;home&#x2F;svn&#x2F;svnusers.conf admin</span><br><span class="line">-c：创建一个加密文件；只有第一次创建账户密码时使用</span><br><span class="line">-n：不更新加密文件，只将加密后的用户名密码显示在屏幕上； </span><br><span class="line">-m：默认采用MD5算法对密码进行加密；</span><br><span class="line">-d：采用CRYPT算法对密码进行加密； </span><br><span class="line">-p：不对密码进行进行加密，即明文密码； </span><br><span class="line">-s：采用SHA算法对密码进行加密；</span><br><span class="line">-b：在命令行中一并输入用户名和密码而不是根据提示输入密码；</span><br><span class="line">-D：删除指定的用户</span><br></pre></td></tr></table></figure>

<p>admin要创建的可访问用户的名字(如我想创建一个asd用户访问这个svn项目仓库，这个username就是asd)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# htpasswd -c -m &#x2F;home&#x2F;svn&#x2F;svnusers.conf admin</span><br><span class="line">New password:</span><br><span class="line">Re-type new password:</span><br><span class="line">Adding password for user admin</span><br></pre></td></tr></table></figure>

<p>按提示输入两次密码，我们就创建了一个可访问用户名和密码。</p>
<p>如果想要新增加用户abc**(第二次添加用户)**</p>
<p><strong>不需要使用-c参数，如果使用的会覆盖原来的svnusers.conf文件</strong></p>
<p>htpasswd -m /home/svn/ProjectName/conf/accesspwd abc</p>
<p>　　接着输入两次密码，</p>
<p>　　继续增加用户。。。</p>
<p>或者使用</p>
<p># htpasswd -mb /home/svn/svnusers.conf username password</p>
<p>-b  使用命令行中的密码，而不是提示输入密码。</p>
<p>例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost svn]# htpasswd -mb &#x2F;home&#x2F;svn&#x2F;svnusers.conf adminroot cnbigjx</span><br><span class="line">Updating password for user adminroot</span><br><span class="line">[root@localhost svn]#</span><br><span class="line">[root@localhost svn]# htpasswd -mb &#x2F;home&#x2F;svn&#x2F;svnusers.conf cnbilh cnbilh123</span><br><span class="line">Adding password for user cnbilh</span><br><span class="line">[root@localhost svn]# htpasswd -mb &#x2F;home&#x2F;svn&#x2F;svnusers.conf cnbilc cnbilc123</span><br><span class="line">Adding password for user cnbilc</span><br><span class="line">[root@localhost svn]# htpasswd -mb &#x2F;home&#x2F;svn&#x2F;svnusers.conf cnbiln cnbiln123</span><br><span class="line">Adding password for user cnbiln</span><br><span class="line">[root@localhost svn]# htpasswd -mb &#x2F;home&#x2F;svn&#x2F;svnusers.conf cnbilq cnbilq123</span><br><span class="line">Adding password for user cnbilq</span><br><span class="line">[root@localhost svn]# htpasswd -mb &#x2F;home&#x2F;svn&#x2F;svnusers.conf cnbimj cnbimj123</span><br><span class="line">Adding password for user cnbimj</span><br><span class="line">[root@localhost svn]# htpasswd -mb &#x2F;home&#x2F;svn&#x2F;svnusers.conf cnbishj cnbishj123</span><br><span class="line">Adding password for user cnbishj</span><br><span class="line">[root@localhost svn]# htpasswd -mb &#x2F;home&#x2F;svn&#x2F;svnusers.conf cnbiwj cnbiwj123</span><br><span class="line">Adding password for user cnbiwj</span><br></pre></td></tr></table></figure>

<h4 id="（4）创建存放用户访问路径的文件并设置权限"><a href="#（4）创建存放用户访问路径的文件并设置权限" class="headerlink" title="（4）创建存放用户访问路径的文件并设置权限"></a>（4）创建存放用户访问路径的文件并设置权限</h4><p>vi accesspolicy.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cd &#x2F;usr&#x2F;local&#x2F;svn&#x2F;</span><br><span class="line">[root@localhost svn]#</span><br><span class="line">[root@localhost svn]# ls</span><br><span class="line"> demo  svnusers.conf</span><br><span class="line">[root@localhost svn]#</span><br><span class="line">[root@localhost svn]# vi accesspolicy.conf</span><br><span class="line">[groups]</span><br><span class="line">admin &#x3D; admin</span><br><span class="line">[&#x2F;]</span><br><span class="line">*&#x3D;r</span><br><span class="line">@admin &#x3D; rw</span><br><span class="line"></span><br><span class="line">[demo]</span><br><span class="line">*&#x3D;rw</span><br><span class="line">@admin &#x3D; rw</span><br></pre></td></tr></table></figure>

<h4 id="（5）修改目录权限进行Apache授权"><a href="#（5）修改目录权限进行Apache授权" class="headerlink" title="（5）修改目录权限进行Apache授权"></a>（5）修改目录权限进行Apache授权</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R apache:apache &#x2F;usr&#x2F;local&#x2F;svn&#x2F;</span><br></pre></td></tr></table></figure>

<h4 id="（6）httpd默认端口为80，如需修改"><a href="#（6）httpd默认端口为80，如需修改" class="headerlink" title="（6）httpd默认端口为80，如需修改"></a>（6）httpd默认端口为80，如需修改</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim&#x2F;etc&#x2F;httpd&#x2F;conf&#x2F;httpd.conf</span><br></pre></td></tr></table></figure>

<p><img src="http://114.55.28.2/images/hexo/2021/1/4/10.png" alt="10"></p>
<h4 id="（7）启动或重启httpd服务"><a href="#（7）启动或重启httpd服务" class="headerlink" title="（7）启动或重启httpd服务"></a>（7）启动或重启httpd服务</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service httpd restart  或者 systemctl restart httpd.service</span><br></pre></td></tr></table></figure>

<h4 id="（8）-浏览器访问"><a href="#（8）-浏览器访问" class="headerlink" title="（8） 浏览器访问"></a>（8） 浏览器访问</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;ip:端口&#x2F;svn&#x2F;demo&#x2F;</span><br></pre></td></tr></table></figure></div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/Linux/">Linux</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/Linux/">Linux</a></div><hr></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2021-01-04  <a class="commentCountImg" href="/2021/01/04/spring%E4%B9%8B%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1-Async/#comment-container"><span class="display-none-class">807b9174d5ffec5c91815c068ef52cb2</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="807b9174d5ffec5c91815c068ef52cb2">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>4 分钟  <i class="fas fa-pencil-alt"> </i>0.7 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/04/spring%E4%B9%8B%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1-Async/">spring之异步任务@Async</a></h1><div class="content"><h2 id="什么是异步任务？"><a href="#什么是异步任务？" class="headerlink" title="什么是异步任务？"></a>什么是异步任务？</h2><p>​        在项目中，当访问其他人的接口较慢或者做耗时任务时，不想程序一直卡在耗时任务上，想程序能够并行执行，我们可以使用多线程来并行的处理任务，也可以使用spring提供的异步处理方式@Async</p>
<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><h4 id="1-注入自定义线程池"><a href="#1-注入自定义线程池" class="headerlink" title="1.注入自定义线程池"></a>1.注入自定义线程池</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">@EnableAsync</span><br><span class="line">public class AsyncConfig implements AsyncConfigurer &#123;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 注入线程池</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Bean(name &#x3D; &quot;Executor&quot;)</span><br><span class="line">    @Override</span><br><span class="line">    public Executor getAsyncExecutor() &#123;</span><br><span class="line">        ThreadPoolTaskExecutor executor &#x3D; new ThreadPoolTaskExecutor();</span><br><span class="line">        &#x2F;&#x2F;通过Runtime方法来获取当前服务器cpu内核，根据cpu内核来创建核心线程数和最大线程数</span><br><span class="line">        int threadCount &#x3D; Runtime.getRuntime().availableProcessors();</span><br><span class="line">        &#x2F;&#x2F;核心池大小</span><br><span class="line">        executor.setCorePoolSize(threadCount);</span><br><span class="line">        &#x2F;&#x2F;最大线程数</span><br><span class="line">        executor.setMaxPoolSize(threadCount);</span><br><span class="line">        &#x2F;&#x2F;队列程度</span><br><span class="line">        executor.setQueueCapacity(1000);</span><br><span class="line">        &#x2F;&#x2F;线程空闲时间</span><br><span class="line">        executor.setKeepAliveSeconds(1000);</span><br><span class="line">        &#x2F;&#x2F;线程前缀名称</span><br><span class="line">        executor.setThreadNamePrefix(&quot;taskExecutor-&quot;);</span><br><span class="line">        &#x2F;&#x2F;配置拒绝策略</span><br><span class="line">        executor.setRejectedExecutionHandler(new ThreadPoolExecutor.AbortPolicy());</span><br><span class="line">        return executor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-创建异步任务"><a href="#2-创建异步任务" class="headerlink" title="2.创建异步任务"></a>2.创建异步任务</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.demo.multithread.Async;</span><br><span class="line"></span><br><span class="line">import org.springframework.scheduling.annotation.Async;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">public class AsyncDemo &#123;</span><br><span class="line">    </span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 无返回值的异步任务</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Async(&quot;Executor&quot;)</span><br><span class="line">    public void doTask() throws Exception &#123;</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            System.out.println(&quot;开始执行异步任务-&quot; + Thread.currentThread().getName());</span><br><span class="line">            Thread.sleep(3000);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Thread.sleep(3000)是为了模拟任务的执行过程</p>
<h4 id="3-调用异步任务"><a href="#3-调用异步任务" class="headerlink" title="3.调用异步任务"></a>3.调用异步任务</h4><p>注意：这里异步任务所在的类必须通过spring注入，不能直接new</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package com.demo.multithread;</span><br><span class="line"></span><br><span class="line">import com.demo.multithread.Async.AsyncDemo;</span><br><span class="line">import org.junit.jupiter.api.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line">import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line">import org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line">@SpringBootTest()</span><br><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">public class Test1 &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private AsyncDemo asyncDemo;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test1() throws Exception &#123;</span><br><span class="line">        long start &#x3D; System.currentTimeMillis();</span><br><span class="line">        asyncDemo.doTask();</span><br><span class="line">        long end &#x3D; System.currentTimeMillis();</span><br><span class="line">        System.out.println(&quot;异步任务执行完毕，耗时：&quot; + (end - start) + &quot;毫秒,执行线程：&quot; + </span><br><span class="line">        					Thread.currentThread().getName());</span><br><span class="line">        Thread.sleep(20000);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Thread.sleep（20000）的目的是：单元测试，走的一个完整的springboot生命周期，<strong>主线程执行时间短，springboot运行结束，固线程池关闭，所以，在springboot单元测试中，测试异步线程最好在主线程最后几行加Thread.sleep(),等待子线程执行结束后结束主线程，这样做并没有实际意义，就是为了观察子线程到底执行没有，在实际环境中，springboot一直运行中，故不会出现这种情况</strong>。</p>
<p>日志打印结果为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">异步任务执行完毕，耗时：31毫秒,执行线程：main</span><br><span class="line">开始执行异步任务-taskExecutor-1</span><br><span class="line">开始执行异步任务-taskExecutor-1</span><br><span class="line">开始执行异步任务-taskExecutor-1</span><br><span class="line">开始执行异步任务-taskExecutor-1</span><br><span class="line">开始执行异步任务-taskExecutor-1</span><br></pre></td></tr></table></figure>

<p>从日志中可以看到，任务是异步执行的。</p>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/spring/">spring</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/spring/">spring</a></div><hr></div></article></div><!--!--><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2021-01-04  <a class="commentCountImg" href="/2021/01/04/springboot%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F/#comment-container"><span class="display-none-class">a895cbb726fd1191df6318ba3deba261</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="a895cbb726fd1191df6318ba3deba261">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>2 分钟  <i class="fas fa-pencil-alt"> </i>0.2 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/04/springboot%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F/">springboot配置文件加载顺序</a></h1><div class="content"><h2 id="1-配置文件存放目录"><a href="#1-配置文件存放目录" class="headerlink" title="1.配置文件存放目录"></a>1.配置文件存放目录</h2><p>​        Spring Boot启动会扫描以下位置的application.properties或者application.yml文件作为spring boot的默认配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-file:&#x2F;config&#x2F;</span><br><span class="line">-file:.&#x2F;</span><br><span class="line">-classpath:&#x2F;config&#x2F;</span><br><span class="line">-classpath:&#x2F;</span><br></pre></td></tr></table></figure>

<p>以上是按照优先级从高到低的顺序，所有位置的文件都会被加载，高优先级的配置内容会覆盖低优先级配置内容。</p>
<p>我们也可以通过配置spring.config.location来改变默认配置。</p>
<h2 id="2-yml和properties的加载顺序"><a href="#2-yml和properties的加载顺序" class="headerlink" title="2.yml和properties的加载顺序"></a>2.yml和properties的加载顺序</h2><p>​        正常的情况是先加载yml，接下来加载properties文件。如果相同的配置存在于两个文件中。最后会使用properties中的配置。最后读取的优先集最高</p>
<h2 id="3-springboot外部配置的加载顺序"><a href="#3-springboot外部配置的加载顺序" class="headerlink" title="3.springboot外部配置的加载顺序"></a>3.springboot外部配置的加载顺序</h2><p>​    由jar包外向jar包内进行加载，比如和工程平级目录下面的配置文件优先级高于jar包内部的配置文件</p>
<p><img src="http://114.55.28.2/images/hexo/2021/1/4/1.png" alt="img"></p>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/springboot/">springboot</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/springboot/">springboot</a></div><hr></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2020-12-31  <a class="commentCountImg" href="/2020/12/31/markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/#comment-container"><span class="display-none-class">d4e1dbd4aa0999bb652c7df5d6734171</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="d4e1dbd4aa0999bb652c7df5d6734171">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>4 分钟  <i class="fas fa-pencil-alt"> </i>0.6 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/12/31/markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/">Markdown基本语法学习</a></h1><div class="content"><p>[TOC]</p>
<hr>
<h1 id="一、标题"><a href="#一、标题" class="headerlink" title="一、标题"></a>一、标题</h1><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 这是一级标题</span><br><span class="line">## 这是二级标题</span><br><span class="line">### 这是三级标题</span><br><span class="line">#### 这是四级标题</span><br><span class="line">##### 这是五级标题</span><br><span class="line">###### 这是六级标题</span><br></pre></td></tr></table></figure>

<h1 id="这是一级标题"><a href="#这是一级标题" class="headerlink" title="这是一级标题"></a>这是一级标题</h1><h2 id="这是二级标题"><a href="#这是二级标题" class="headerlink" title="这是二级标题"></a>这是二级标题</h2><h3 id="这是三级标题"><a href="#这是三级标题" class="headerlink" title="这是三级标题"></a>这是三级标题</h3><h4 id="这是四级标题"><a href="#这是四级标题" class="headerlink" title="这是四级标题"></a>这是四级标题</h4><h5 id="这是五级标题"><a href="#这是五级标题" class="headerlink" title="这是五级标题"></a>这是五级标题</h5><h6 id="这是六级标题"><a href="#这是六级标题" class="headerlink" title="这是六级标题"></a>这是六级标题</h6><h1 id="二、字体"><a href="#二、字体" class="headerlink" title="二、字体"></a>二、字体</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">**这是加粗的文字**</span><br><span class="line">*这是倾斜的文字*&#96;</span><br><span class="line">***这是斜体加粗的文字***</span><br><span class="line">~~这是加删除线的文字~~</span><br></pre></td></tr></table></figure>

<p><strong>这是加粗的文字</strong><br><em>这是倾斜的文字</em>`<br><strong><em>这是斜体加粗的文字</em></strong><br><del>这是加删除线的文字</del></p>
<h1 id="三、引用"><a href="#三、引用" class="headerlink" title="三、引用"></a>三、引用</h1><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;这是引用的内容</span><br><span class="line"><span class="meta">&gt;&gt;</span>这是引用的内容</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;这是引用的内容</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这是引用的内容</p>
<blockquote>
<p>这是引用的内容</p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>这是引用的内容</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<h1 id="四、分割线"><a href="#四、分割线" class="headerlink" title="四、分割线"></a>四、分割线</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">----</span><br><span class="line">***</span><br><span class="line">*****</span><br></pre></td></tr></table></figure>

<hr>
<hr>
<hr>
<hr>
<h1 id="五、图片"><a href="#五、图片" class="headerlink" title="五、图片"></a>五、图片</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">![图片alt](图片地址 <span class="string">&#x27;&#x27;</span>图片title<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">图片alt就是显示在图片下面的文字，相当于对图片内容的解释。</span><br><span class="line">图片title是图片的标题，当鼠标移到图片上时显示的内容。title可加可不加</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\dell\Pictures\timg.jpg"></p>
<h1 id="六、超链接"><a href="#六、超链接" class="headerlink" title="六、超链接"></a>六、超链接</h1><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">简书</span>](http:<span class="comment">//jianshu.com)</span></span><br><span class="line">[<span class="meta">百度</span>](http:<span class="comment">//baidu.com)</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://jianshu.com/">简书</a><br><a target="_blank" rel="noopener" href="http://baidu.com/">百度</a></p>
<h1 id="七、列表"><a href="#七、列表" class="headerlink" title="七、列表"></a>七、列表</h1><h2 id="1-无序列表"><a href="#1-无序列表" class="headerlink" title="1.无序列表"></a>1.无序列表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- 我是一个列表</span><br><span class="line">+ 我是一个列表</span><br><span class="line">* 我是一个列表</span><br><span class="line"></span><br><span class="line">注意：- + * 跟内容之间都要有一个空格</span><br></pre></td></tr></table></figure>

<ul>
<li>我是一个列表</li>
</ul>
<ul>
<li>我是一个列表</li>
</ul>
<ul>
<li>我是一个列表</li>
</ul>
<h2 id="2-有序列表"><a href="#2-有序列表" class="headerlink" title="2.有序列表"></a>2.有序列表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 列表内容</span><br><span class="line">2. 列表内容</span><br><span class="line">3. 列表内容</span><br><span class="line"></span><br><span class="line">注意：序号跟内容之间要有空格</span><br></pre></td></tr></table></figure>

<ol>
<li>列表内容</li>
<li>列表内容</li>
<li>列表内容</li>
</ol>
<h2 id="3-列表嵌套"><a href="#3-列表嵌套" class="headerlink" title="3.列表嵌套"></a>3.列表嵌套</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. 第一项：</span><br><span class="line">    - 第一项嵌套的第一个元素</span><br><span class="line">    - 第一项嵌套的第二个元素</span><br><span class="line">2. 第二项：</span><br><span class="line">    - 第二项嵌套的第一个元素</span><br><span class="line">    - 第二项嵌套的第二个元素</span><br></pre></td></tr></table></figure>

<ol>
<li>第一项：<ul>
<li>第一项嵌套的第一个元素</li>
<li>第一项嵌套的第二个元素</li>
</ul>
</li>
<li>第二项：<ul>
<li>第二项嵌套的第一个元素</li>
<li>第二项嵌套的第二个元素</li>
</ul>
</li>
</ol>
<h1 id="八、表格"><a href="#八、表格" class="headerlink" title="八、表格"></a>八、表格</h1><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">姓名<span class="params">|技能|</span>排行</span><br><span class="line">--<span class="params">|:--:|</span>--<span class="symbol">:</span></span><br><span class="line">刘备<span class="params">|哭|</span>大哥</span><br><span class="line">关羽<span class="params">|打|</span>二哥</span><br><span class="line">张飞<span class="params">|骂|</span>三弟</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>姓名</th>
<th align="center">技能</th>
<th align="right">排行</th>
</tr>
</thead>
<tbody><tr>
<td>刘备</td>
<td align="center">哭</td>
<td align="right">大哥</td>
</tr>
<tr>
<td>关羽</td>
<td align="center">打</td>
<td align="right">二哥</td>
</tr>
<tr>
<td>张飞</td>
<td align="center">骂</td>
<td align="right">三弟</td>
</tr>
</tbody></table>
<h1 id="九、代码"><a href="#九、代码" class="headerlink" title="九、代码"></a>九、代码</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">  我是一行代码</span></span><br><span class="line"><span class="string">  我是一行代码</span></span><br><span class="line"><span class="string">  我是一行代码</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">代码...</span><br><span class="line">代码...</span><br><span class="line">代码...</span><br></pre></td></tr></table></figure>

<h1 id="十、流程图"><a href="#十、流程图" class="headerlink" title="十、流程图"></a>十、流程图</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">```flow</span><br><span class="line">st=&gt;start: 开始</span><br><span class="line">op=&gt;operation: My Operation</span><br><span class="line">cond=&gt;condition: Yes <span class="keyword">or</span> No?</span><br><span class="line">e=&gt;end</span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;e</span><br><span class="line">cond(no)-&gt;op</span><br><span class="line">&amp;```</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">st&#x3D;&gt;start: 开始</span><br><span class="line">op&#x3D;&gt;operation: My Operation</span><br><span class="line">cond&#x3D;&gt;condition: Yes or No?</span><br><span class="line">e&#x3D;&gt;end</span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;e</span><br><span class="line">cond(no)-&gt;op</span><br><span class="line">&amp;&#96;&#96;&#96;</span><br></pre></td></tr></table></figure>

</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/markdown/">markdown</a></div><hr></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2020-12-31  <a class="commentCountImg" href="/2020/12/31/windows%E7%94%A8cmd%E5%91%BD%E4%BB%A4%E6%9F%A5%E7%9C%8B%E4%B8%BB%E6%9D%BF%E6%94%AF%E6%8C%81%E7%9A%84%E6%9C%80%E5%A4%A7%E5%86%85%E5%AD%98/#comment-container"><span class="display-none-class">6fddb5823242c7fade711210ccac7f45</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="6fddb5823242c7fade711210ccac7f45">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>几秒  <i class="fas fa-pencil-alt"> </i>0.1 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/12/31/windows%E7%94%A8cmd%E5%91%BD%E4%BB%A4%E6%9F%A5%E7%9C%8B%E4%B8%BB%E6%9D%BF%E6%94%AF%E6%8C%81%E7%9A%84%E6%9C%80%E5%A4%A7%E5%86%85%E5%AD%98/">windows用cmd命令查看主板支持的最大内存</a></h1><div class="content"><h2 id="1-同时按住键盘上的win-R，打开运行"><a href="#1-同时按住键盘上的win-R，打开运行" class="headerlink" title="1.同时按住键盘上的win+R，打开运行"></a>1.同时按住键盘上的win+R，打开运行</h2><p><img src="http://114.55.28.2/images/hexo/2020/12/31/1.png"></p>
<h2 id="2-输入cmd，按下回车或者点确定"><a href="#2-输入cmd，按下回车或者点确定" class="headerlink" title="2.输入cmd，按下回车或者点确定"></a>2.输入cmd，按下回车或者点确定</h2><p><img src="http://114.55.28.2/images/hexo/2020/12/31/2.png"></p>
<h2 id="3-在dos命令窗口，输入“wmic-memphysical-get-maxcapacity”，按回车"><a href="#3-在dos命令窗口，输入“wmic-memphysical-get-maxcapacity”，按回车" class="headerlink" title="3.在dos命令窗口，输入“wmic memphysical get maxcapacity”，按回车"></a>3.在dos命令窗口，输入“wmic memphysical get maxcapacity”，按回车</h2><p><img src="http://114.55.28.2/images/hexo/2020/12/31/3.png"></p>
<p>用得出的数值除以1024得出的是M单位，再除以1024得出的是G单位</p>
<p><img src="http://114.55.28.2/images/hexo/2020/12/31/4.png"></p>
<p>得出16，说明电脑最大支持16G运行内存</p>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/windows/">windows</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/windows/">windows</a></div><hr></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2020-12-30  <a class="commentCountImg" href="/2020/12/30/request-getHeader%E6%8B%BF%E4%B8%8D%E5%88%B0%E5%80%BC/#comment-container"><span class="display-none-class">da0de665dc2aa0b576bebf84c83bbc9e</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="da0de665dc2aa0b576bebf84c83bbc9e">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>2 分钟  <i class="fas fa-pencil-alt"> </i>0.3 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/12/30/request-getHeader%E6%8B%BF%E4%B8%8D%E5%88%B0%E5%80%BC/">request.getHeader拿不到值</a></h1><div class="content"><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>SpringBoot项目，部署在linux上，request.getHeader(“access_token”)一直无法取到值。</p>
<p>但是在本地windows环境下是没问题的</p>
<h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>归根究竟，是因为服务器上部署了nginx，<strong>默认情况下header名字是不能加下划线的</strong></p>
<h6 id="根据nginx文档，是因为历史遗留原因"><a href="#根据nginx文档，是因为历史遗留原因" class="headerlink" title="根据nginx文档，是因为历史遗留原因"></a>根据nginx文档，是因为历史遗留原因</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">If you do not explicitly set underscores_in_headers on;, NGINX will silently drop HTTP headers with underscores (which are perfectly valid according to the HTTP standard). This is done in order to prevent ambiguities when mapping headers to CGI variables as both dashes and underscores are mapped to underscores during that process.https:&#x2F;&#x2F;www.nginx.com&#x2F;resourc...</span><br></pre></td></tr></table></figure>

<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><h5 id="一、修改header值"><a href="#一、修改header值" class="headerlink" title="一、修改header值"></a>一、修改header值</h5><p>将access_token改成access-token</p>
<h5 id="二、修改nginx配置"><a href="#二、修改nginx配置" class="headerlink" title="二、修改nginx配置"></a>二、修改nginx配置</h5><p>配置nginx的http，让它支持了下划线</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">underscores_in_headers on;  &#x2F;&#x2F; 允许headers fields 里的下划线</span><br><span class="line"></span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        proxy_pass_request_headers on; &#x2F;&#x2F; 确定转化http headers</span><br><span class="line"></span><br><span class="line">        proxy_pass_header Server;</span><br><span class="line">        proxy_redirect off;</span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Scheme $scheme;</span><br><span class="line">        proxy_connect_timeout 60s;</span><br><span class="line">        proxy_read_timeout 5400s;</span><br><span class="line">        proxy_send_timeout 5400s;</span><br><span class="line">        proxy_pass http:&#x2F;&#x2F;pb_web;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/nginx/">nginx</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/nginx/">nginx</a></div><hr></div></article></div><!--!--><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/page/0/">上一页</a></div><div class="pagination-next"><a href="/page/2/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><a class="pagination-link" href="/page/3/">3</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><!--!--><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="http://114.55.28.2/images/header.jpg" alt="uzxin"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">uzxin</p><p class="is-size-6 is-block">万事皆因忙中错，好人半自苦中来</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>四川成都</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">24</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">10</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">14</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/uzxin" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/uzxin"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://weibo.com/uzxin"><i class="fab fa-weibo"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="/1258971228@qq.com"><i class="fa fa-envelope"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Next" href="https://uzxin.github.io/remove.io"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div><div><hr><p id="hitokoto">:D 一言句子获取中...</p><script type="text/javascript" defer>function getYiyan(){
                                $.getJSON("https://v1.hitokoto.cn/", function (data) {
                                if(data){
                                    $('#hitokoto').html("");
                                    $('#hitokoto').append("<strong style='color: #3273dc;'>"+data.hitokoto+"</strong>"+
                                    "<p>"+"来源《"+data.from+"》</p><p>提供者-"+data.creator+"</p>");
                                }});}
                                $(function (){getYiyan();$('#hitokoto').click(function(){getYiyan();})});</script></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://www.cnblogs.com/uzxin" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">博客园</span></span><span class="level-right"><span class="level-item tag">www.cnblogs.com</span></span></a></li><li><a class="level is-mobile" href="https://www.baidu.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">暂定</span></span><span class="level-right"><span class="level-item tag">www.baidu.com</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget"><div class="card-content"><h3 class="menu-label">最新评论</h3><span class="body_hot_comment">加载中，最新评论有1分钟缓存...</span></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-06T06:47:44.000Z">2021-01-06</time></p><p class="title"><a href="/2021/01/06/springboot%E6%95%B4%E5%90%88elaticsearch/">springboot整合elaticsearch</a></p><p class="categories"><a href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-06T02:47:44.000Z">2021-01-06</time></p><p class="title"><a href="/2021/01/06/windows%E5%AE%89%E8%A3%85elasticsearch/">windows安装elasticsearch</a></p><p class="categories"><a href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-06T01:47:44.000Z">2021-01-06</time></p><p class="title"><a href="/2021/01/06/mysql5-7%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81/">mysql5.7修改用户密码</a></p><p class="categories"><a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-06T01:47:44.000Z">2021-01-06</time></p><p class="title"><a href="/2021/01/06/elasticsearch%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/">elasticsearch基本概念</a></p><p class="categories"><a href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-04T08:47:44.000Z">2021-01-04</time></p><p class="title"><a href="/2021/01/04/centos%E5%AE%89%E8%A3%85svn/">centos安装svn</a></p><p class="categories"><a href="/categories/Linux/">Linux</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/java%E5%9F%BA%E7%A1%80/"><span class="level-start"><span class="level-item">java基础</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/nginx/"><span class="level-start"><span class="level-item">nginx</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/spring/"><span class="level-start"><span class="level-item">spring</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/springboot/"><span class="level-start"><span class="level-item">springboot</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/windows/"><span class="level-start"><span class="level-item">windows</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%89%8D%E7%AB%AF/"><span class="level-start"><span class="level-item">前端</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item">工具</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="level-start"><span class="level-item">数据库</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E9%9D%A2%E8%AF%95/"><span class="level-start"><span class="level-item">面试</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><a class="level is-mobile is-marginless" href="/categories/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/12/"><span class="level-start"><span class="level-item">十二月 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/11/"><span class="level-start"><span class="level-item">十一月 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/10/"><span class="level-start"><span class="level-item">十月 2020</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/java%E5%9F%BA%E7%A1%80/"><span class="tag">java基础</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/springboot/"><span class="tag">springboot</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MySQL/"><span class="tag">MySQL</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/elaticsearch/"><span class="tag">elaticsearch</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/windows/"><span class="tag">windows</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B9%B6%E5%8F%91/"><span class="tag">并发</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%BA%90%E7%A0%81/"><span class="tag">源码</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jvm/"><span class="tag">jvm</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/layui/"><span class="tag">layui</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/markdown/"><span class="tag">markdown</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spring/"><span class="tag">spring</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AE%B9%E5%99%A8/"><span class="tag">容器</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><!--!--></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="http://114.55.28.2/images/uzxin_logo.png" alt="uzxin的个人博客" height="28"></a><p class="size-small"><span>&copy; 2021 uzxin</span>  Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a> &amp; <a href="https://github.com/removeif/hexo-theme-amazing" target="_blank">Amazing</a> <br><span>© <a href="http://www.beian.miit.gov.cn/" target="_blank">川ICP备88888888号-8（测试）</a><br></span><span>© 版权说明：[本网站所有内容均收集于互联网或自己创作,<br />&nbsp;&nbsp;&nbsp;&nbsp;方便于网友与自己学习交流，如有侵权，请<a href="/message" target="_blank">留言</a>，立即处理]<br /></span><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️本站自 <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> 已运行 <strong>" + dnum + "</strong> 天 <strong>" + hnum + "</strong> 小时 <strong>" + mnum + "</strong> 分 <strong>" + snum + "</strong> 秒！❤️";
        }var now = new Date();setInterval("createTime('2020/10/22 00:00:00')", 250,"");</script><br></span><div class="size-small"><span>❤️感谢 <strong><span id="busuanzi_value_site_uv">99+</span></strong> 小伙伴的 <strong><span id="busuanzi_value_site_pv">99+</span></strong> 次光临！❤️</span></div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/removeif/hexo-theme-amazing"><i class="fab fa-github"></i></a></p></div><div class="sideMusic"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="/js/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><meting-js style="width: auto;height: 2000px;" server="netease" type="playlist" id="2364053447" theme="#2980b9" loop="all" autoplay="false" order="list" storageName="aplayer-setting" lrctype="0" list-max-height="400px" fixed="true"></meting-js></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script>$.getScript('/js/comment-issue-data.js',function(){loadIssueData('0090984d5de7dcd25307','f9af6be3151efd9adcd34f6ad38d7f1acb37c0f3','uzxin','blog_comment',false);})</script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script type="text/javascript">var pjax = new Pjax({
            elements: "a",//代表点击链接就更新
            selectors: [  //代表要更新的节点
                ".section",
                "title"
            ],
            cache: true,
            cacheBust:false
        })

        function loadBusuanzi(){
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js", function () {});
        }

        // 开始 PJAX 执行的函数
        document.addEventListener('pjax:send', function () {
        });
        
        // PJAX 完成之后执行的函数，可以和上面的重载放在一起
        document.addEventListener('pjax:complete', function () {
            $(".section").css({opacity:1});
            if(true){
                $.getScript('/js/comment-issue-data.js',function(){loadIssueData('0090984d5de7dcd25307','f9af6be3151efd9adcd34f6ad38d7f1acb37c0f3','uzxin','blog_comment',false);});
            }
            if(false){
                loadMathJax();
            }
            loadMainJs(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);
            loadBackTop();
            loadBusuanzi();
            if(typeof loadBanner == 'function'){
                loadBanner();
            }
        });</script></body></html>